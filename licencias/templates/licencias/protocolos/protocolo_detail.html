{% extends "licencias/base.html" %}

{% block title %}Protocolo {{ protocolo.numero_registro }} | SEGEY Licencias{% endblock %}

{% block content %}
<div class="page-header">
    <div>
        <h1 class="page-title">Protocolo {{ protocolo.numero_registro }}</h1>
        <p class="lead">Seguimiento del caso registrado para {{ protocolo.cct.cct }} · {{ protocolo.escuela }}.</p>
    </div>
    <div class="chip-group">
        <span class="chip">Estatus: {{ protocolo.get_estatus_display }}</span>
        <span class="chip">Sexo: {{ protocolo.get_sexo_display }}</span>
        <span class="chip">Año: {{ protocolo.anio }}</span>
    </div>
</div>

<div class="stack-lg">
    <section class="surface-elevated stack">
        <h2 class="section-title">Datos principales</h2>
        <div class="data-grid">
            <div class="data-item">
                <span class="data-label">Fecha de inicio</span>
                <span class="data-value">{{ protocolo.fecha_inicio|date:"d/m/Y" }}</span>
            </div>
            <div class="data-item">
                <span class="data-label">Iniciales</span>
                <span class="data-value">{{ protocolo.iniciales }}</span>
            </div>
            <div class="data-item">
                <span class="data-label">Nombre del NNA</span>
                <span class="data-value">{{ protocolo.nombre_nna }}</span>
            </div>
            <div class="data-item">
                <span class="data-label">CCT</span>
                <span class="data-value">{{ protocolo.cct.cct }}</span>
            </div>
            <div class="data-item">
                <span class="data-label">Escuela</span>
                <span class="data-value">{{ protocolo.escuela }}</span>
            </div>
            <div class="data-item">
                <span class="data-label">Asesor jurídico</span>
                <span class="data-value">{{ protocolo.asesor_juridico|default:"Sin asignar" }}</span>
            </div>
        </div>
    </section>

    <section class="surface-elevated stack">
        <h2 class="section-title">Tipo de violencia y descripción</h2>
        <p><strong>Tipo:</strong> {{ protocolo.tipo_violencia|default:"No especificado" }}</p>
        <p>{{ protocolo.descripcion|default:"Sin descripción registrada." }}</p>
    </section>

    {% if protocolo.comentarios %}
    <section class="surface-elevated stack">
        <h2 class="section-title">Comentarios</h2>
        <p>{{ protocolo.comentarios }}</p>
    </section>
    {% endif %}

    <section class="surface-elevated stack">
        <h2 class="section-title">Acciones</h2>
        <div class="chip-group">
            {% if perms.licencias.change_relacionprotocolo %}
            <a class="btn btn--primary btn--md" href="{% url 'licencias:protocolo-update' protocolo.pk %}">Editar</a>
            {% endif %}
            {% if perms.licencias.delete_relacionprotocolo %}
            <a class="btn btn--danger btn--md" href="{% url 'licencias:protocolo-delete' protocolo.pk %}">Eliminar</a>
            {% endif %}
            <a class="btn btn--secondary btn--md" href="{% url 'licencias:protocolo-list' %}">Volver al listado</a>
        </div>
    </section>
</div>
{% endblock %}
